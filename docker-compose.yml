version: '3.8'

services:
    myip:
        image: jason5ng32/myip:latest
        container_name: myip
        restart: unless-stopped
        ports:
            - '18966:18966'
        environment:
            - PORT=18966
            - ALLOWED_DOMAINS=${ALLOWED_DOMAINS:-}
            - IPINFO_API_TOKEN=${IPINFO_API_TOKEN:-}
        healthcheck:
            test: ['CMD', 'wget', '--spider', '-q', 'http://localhost:18966']
            interval: 30s
            timeout: 10s
            retries: 3
